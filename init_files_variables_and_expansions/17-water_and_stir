#!/bin/bash

water="water"
stir="stir"
bestchol="bestchol"

to_decimal() {
  local number=$1 base_chars=$2
  local base=${#base_chars}
  local decimal=0
  local i char pos
  for (( i=0; i<${#number}; i++ )); do
    char=${number:i:1}
    pos=$(expr index "$base_chars" "$char")
    (( pos-- ))
    (( decimal = decimal * base + pos ))
  done
  echo $decimal
}

from_decimal() {
  local decimal=$1 base_chars=$2
  local base=${#base_chars}
  local result=""
  local rem
  if [ $decimal -eq 0 ]; then
    echo "${base_chars:0:1}"
    return
  fi
  while [ $decimal -gt 0 ]; do
    rem=$(( decimal % base ))
    decimal=$(( decimal / base ))
    result="${base_chars:$rem:1}$result"
  done
  echo $result
}

w=$(to_decimal "$WATER" "$water")
s=$(to_decimal "$STIR" "$stir")
sum=$(( w + s ))
from_decimal $sum "$bestchol"

